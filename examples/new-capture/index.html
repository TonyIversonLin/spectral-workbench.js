<!DOCTYPE html>
<html manifest="/not-existing.appcache">
<head>
  <meta charset="utf-8">
  <title>SpectralWorkbench</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="An open source spectral library and DIY spectrometry community developing environmental testing techniques.">
  <meta name="author" content="Public Lab contributors">

  <link rel="apple-touch-icon" href="//spectralworkbench.org/images/spectral-workbench-256.png">
  <link rel="apple-touch-fa-precomposed" href="//spectralworkbench.org/images/spectral-workbench-256.png">
  <link rel="apple-touch-fa-precomposed apple-touch-icon" href="//spectralworkbench.org/images/spectral-workbench-256.png">
  <link rel="shortcut icon" href="//spectralworkbench.org/images/spectral-workbench-256.png" />

  <link rel="stylesheet" href="../../node_modules/font-awesome/css/font-awesome.min.css"/>
  <link rel="stylesheet" href="../../node_modules/bootstrap/dist/css/bootstrap.min.css"/>

  <script src="../../node_modules/getusermedia-js/dist/getUserMedia.min.js"></script>
  <script src="../../node_modules/jquery/dist/jquery.min.js"></script>
  <script src="../../node_modules/flot/jquery.flot.js"></script>
  <script src="../../node_modules/flot/jquery.flot.crosshair.js"></script>
  <script src="../../node_modules/flot/jquery.flot.threshold.js"></script>
  <script src="../../node_modules/bootstrap/dist/js/bootstrap.min.js"></script>
  <script src="graph.js" type="text/javascript"></script>

  <script src="capture.js" type="text/javascript"></script>
  <script src="../../dist/capture.dist.js" type="text/javascript"></script>
  <script src="api.js" type="text/javascript"></script>
  <link href="capture.css" media="all" rel="stylesheet" type="text/css" />

  <!--
      <link href="/assets/application-5135736be98a3c4fdf136cbc62545fd2.css" media="all" rel="stylesheet" type="text/css" />
      <meta content="Szbc3vBNsTKwYnmFkjg3L2kCBSe8EYSg9Zu7keJJzPs=" name="csrf-token" />
      <script src="/assets/application-0add8749179623a04221903b025c601c.js" type="text/javascript"></script>
  -->

  <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
  <!--[if lt IE 9]>
  <script src="https://html5shim.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->

</head>

<body>
  <div class="tab-content capture" style="padding:0 20px;">
    <div id="settings" class="tab-pane">
      <div id="heightIndicator" style="display:none;position:absolute;margin:0;z-index:999;border-right:0px solid #ff4;border-bottom:2px solid #ff4;height:1px;margin-top:120px;width:320px;font-weight:bold;">
        <div class="vertical"   style="margin-top:3px;padding:2px;background:black;float:right;display:none;">BLUE</div>
        <div class="horizontal" style="margin-top:3px;padding:2px;background:black;float:right;">RED</div>
        <div class="horizontal" style="margin-top:3px;padding:2px;background:black;float:left;">BLUE</div>
        <div class="vertical"   style="margin-top:3px;padding:2px;background:black;float:right;margin-top:200px;display:none;">RED</div>
      </div>
      <div id="webcam-msg"><p><b>Requesting camera access... <br />(<a href="https://play.google.com/store/apps/details?id=org.mozilla.firefox">Firefox</a>, <a href="https://play.google.com/store/apps/details?id=com.opera.browser">Opera</a> or Chrome on Android, or <a href="https://itunes.apple.com/us/app/bowser/id560478358">Bowser</a> on iOS). Please click "Allow" when prompted, or try the <a href="/upload">Upload interface</a>.</b></p></div>
      <div style="" id="webcam"></div>

      <div style="padding-bottom:10px;padding-top:250px;">
        <div class="spectrum-example-vertical" style="display:none;">
          <p style="margin-top:4px;">Point your spectrometer at a light and click on the video above to choose a cross-section to sample. (<a href="http://publiclab.org/wiki/spectral-workbench-usage">Learn more &raquo;</a>)</p>
          <img src="example-cfl-vertical.png" style="height:200px" />
        </div>
        <div class="spectrum-example-horizontal">
          <p style="margin-top:4px;">Point your spectrometer at a light and click on the video above to choose a cross-section as shown below. (<a href="http://publiclab.org/wiki/spectral-workbench-usage">Learn more &raquo;</a>)</p>
          <img width="480px" src="calibration-example.png" />
        </div>
      </div>

      <script>
        jQuery(document).ready(function() {
          $W.setSampleRowClickListener()
        })
      </script>

      <p style="padding-top:5px;">
        <a rel="tooltip" title="" class="btn btn-default" onclick="$W.auto_detect_sample_row()" data-original-title="Auto select sample row"><i class="fa fa-white fa-arrows-v"></i> Auto-select Sample Row</a>
        <a rel="tooltip" title="Flip video horizontally" class="btn btn-default btn-flip" onClick="$W.flip_horizontal()"><i class="fa fa-white fa-arrows-h"></i> Flip image</a>
        <a rel="tooltip" title="Rotate video 90 &deg;" class="btn btn-default btn-rotate" onClick="$W.toggle_rotation()"><i class="fa fa-white fa-rotate-right"></i> Rotate</a>

      </p>
      <p style="padding-top:5px;">
        Help <a href="http://publiclab.org/wiki/spectral-workbench-usage#Webcam+selection">selecting a camera</a>
      </p>


      <a class="btn btn-large btn-primary" href="#capture" onClick="$('#capture-btn').addClass('active');$('#settings-btn').removeClass('active');" data-toggle="tab">Begin capturing &raquo;</a>

      <hr />

      <p><b>Offline use:</b> To use this interface offline, load the offline capture tool <a href="/capture/offline">by clicking here</a>. Once the page loads, you'll be able to access that page even without internet access; it will be stored in your browser.</p>

    </div>


    <div id="capture" class="tab-pane active">
      <div id="sidebar" style="width: 15%">
        <div class="hidden-phone">
          <div id="heightIndicatorPrev" style="position:absolute;margin:0;z-index:999;border-right:0px solid #ff4;border-bottom:2px solid #ff4;height:1px;margin-top:50px;width:100%;"></div>
          <canvas style="width:100%;height:100px;" id="preview"></canvas>
        </div>
        <div class="btn-group toolbar" data-toggle="buttons-checkbox" style="margin-bottom:5px;">
          <a rel="tooltip" title="Rotate video" class="btn btn-default btn-rotate" onClick="$W.toggle_rotation()"><i class="fa fa-white fa-repeat"></i></a>
          <a rel="tooltip" title="Flip video horizontally" class="btn btn-default btn-flip" onClick="$W.flip_horizontal()"><i class="fa fa-white fa-arrows-h"></i></a>
          <a rel="tooltip" title="Scale video" class="btn btn-default" onClick="$W.scale_h = parseFloat(prompt('Enter a horizontal scaling factor (default is 1):'))"><i class="fa fa-white fa-expand"></i></a>
        </div>
        <script>
          jQuery(document).ready(function() {
            $W.observe_contrast(
                    false,
                    function() {
                      $('#cfl-detect i').css('color','red');
                    },
                    function() {
                      $('#cfl-detect i').css('color','white');
                    }
            )
          })

        </script>

      </div>

      <div>
        <div id="graph"></div>
        <canvas style="background:#333;width:100%;height:100px;" id="canvas"></canvas>
        <p>This display shows the last few seconds of data, descending. The top, newest row of pixels is used by default to generate the graph. This can be changed later.</p>
      </div>
    </div>

  </div>

  <script>
    (function() {

      $W.initialize({
        calibrated: false,
        interface:"capture",
        mode:"combined",
        flipped: false,
        width: 640
      })


      setInterval($W.getRow,100)
      $W.calibrated = false

      if ($('body').width() > 768) $('#tool-toggle').hide()
      else $('#tool-pane').hide()

    })();
  </script>
</body>
</html>
